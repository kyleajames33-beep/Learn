<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Track your learning achievements in HSC Biology. View unlocked badges, progress stats, and earn XP rewards.">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <title>Achievements | HSC Biology | Science Hub</title>
  
  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Global Styles -->
  <link rel="stylesheet" href="../assets/css/global.css?v=3">
  <link rel="stylesheet" href="../assets/css/layout.css?v=3">
  <link rel="stylesheet" href="../assets/css/components.css?v=3">
  <link rel="stylesheet" href="../assets/css/streak.css?v=1">
  <link rel="stylesheet" href="../assets/css/xp.css?v=1">
  <link rel="stylesheet" href="../assets/css/achievements.css?v=1">
  <link rel="icon" type="image/svg+xml" href="../assets/images/favicon.svg">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>
<body>
  <!-- Top Navigation -->
  <header class="top-nav">
    <div class="nav-container">
      <button class="mobile-menu-toggle" aria-label="Toggle menu">
        <i data-lucide="menu"></i>
      </button>
      
      <a href="../index.html" class="nav-logo">
        <i data-lucide="atom"></i>
        <span>Science Hub</span>
      </a>
      
      <div class="nav-search">
        <input type="search" placeholder="Search..." aria-label="Search">
      </div>
      
      <div style="width: 40px;"></div>
    </div>
    
    <div class="breadcrumb-container">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="../index.html">Home</a>
        <i data-lucide="chevron-right"></i>
        <a href="./index.html">HSC Biology</a>
        <i data-lucide="chevron-right"></i>
        <span>Achievements</span>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="achievement-page">
    <!-- Header -->
    <div class="achievement-page-header">
      <h1><i data-lucide="trophy" style="display: inline; width: 40px; height: 40px; vertical-align: middle;"></i> Your Achievements</h1>
      <p>Track your progress, unlock badges, and celebrate your learning journey</p>
    </div>

    <!-- Stats Overview -->
    <div class="achievement-overview" id="achievement-stats">
      <div class="achievement-stat-card">
        <div class="achievement-stat-value" id="stat-total">0</div>
        <div class="achievement-stat-label">Total Unlocked</div>
      </div>
      <div class="achievement-stat-card">
        <div class="achievement-stat-value" id="stat-progress">0%</div>
        <div class="achievement-stat-label">Completion</div>
      </div>
      <div class="achievement-stat-card">
        <div class="achievement-stat-value" id="stat-xp">0</div>
        <div class="achievement-stat-label">XP Earned</div>
      </div>
      <div class="achievement-stat-card">
        <div class="achievement-stat-value" id="stat-rare">0</div>
        <div class="achievement-stat-label">Rare+ Badges</div>
      </div>
    </div>

    <!-- Achievement Categories -->
    <div class="achievement-showcase" id="achievement-showcase">
      <div class="achievement-header">
        <h2>All Badges</h2>
        <div class="achievement-stats">
          <span class="achievement-progress" id="header-progress">0/0</span>
          <div class="achievement-progress-bar">
            <div class="achievement-progress-fill" id="header-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>
      
      <div class="achievement-categories" id="achievement-categories">
        <!-- Categories will be populated by JavaScript -->
      </div>
    </div>

    <!-- Rarity Legend -->
    <div style="margin-top: 32px; padding: 20px; background: #f9fafb; border-radius: 12px;">
      <h3 style="margin-bottom: 16px; font-size: 1rem; color: #374151;">Rarity Guide</h3>
      <div style="display: flex; gap: 16px; flex-wrap: wrap;">
        <span class="rarity-badge common">Common</span>
        <span class="rarity-badge uncommon">Uncommon</span>
        <span class="rarity-badge rare">Rare</span>
        <span class="rarity-badge epic">Epic</span>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <i data-lucide="atom"></i>
        <span>Science Hub</span>
      </div>
      <p class="footer-tagline">Making science education accessible, engaging, and effective.</p>
      <div class="footer-links">
        <a href="../index.html">Home</a>
        <a href="./index.html">HSC Biology</a>
      </div>
      <p class="footer-copyright">Â© 2026 Science Learning Hub. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="../assets/js/main.js"></script>
  <script src="../assets/js/streak.js"></script>
  <script src="../assets/js/xp.js"></script>
  <script src="../assets/js/achievements.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Render achievement showcase
      renderAchievementShowcase();
      
      // Update stats
      updateStats();
    });
    
    function updateStats() {
      const stats = AchievementManager.getStats();
      const achievements = AchievementManager.getAllAchievements();
      const rareCount = achievements.filter(a => a.unlocked && (a.rarity === 'rare' || a.rarity === 'epic')).length;
      
      document.getElementById('stat-total').textContent = stats.unlocked;
      document.getElementById('stat-progress').textContent = stats.progress + '%';
      document.getElementById('stat-xp').textContent = stats.totalXPEarned;
      document.getElementById('stat-rare').textContent = rareCount;
      
      document.getElementById('header-progress').textContent = `${stats.unlocked}/${stats.total}`;
      document.getElementById('header-fill').style.width = `${stats.progress}%`;
    }
    
    function renderAchievementShowcase() {
      const achievements = AchievementManager.getAllAchievements();
      const container = document.getElementById('achievement-categories');
      
      const categories = {
        progress: 'Progress',
        performance: 'Performance', 
        streak: 'Streaks',
        explorer: 'Explorer',
        special: 'Special'
      };
      
      container.innerHTML = Object.entries(categories).map(([key, title]) => {
        const categoryAchievements = achievements.filter(a => a.category === key);
        const unlockedCount = categoryAchievements.filter(a => a.unlocked).length;
        
        return `
          <div class="achievement-category">
            <h3>${title} <span class="achievement-count">${unlockedCount}/${categoryAchievements.length}</span></h3>
            <div class="achievement-grid">
              ${categoryAchievements.map(a => renderAchievementCard(a)).join('')}
            </div>
          </div>
        `;
      }).join('');
      
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    }
    
    function renderAchievementCard(achievement) {
      const rarityColors = {
        common: '#6b7280',
        uncommon: '#22c55e',
        rare: '#3b82f6',
        epic: '#a855f7'
      };
      
      const rarityLabel = achievement.rarity.charAt(0).toUpperCase() + achievement.rarity.slice(1);
      
      return `
        <div class="achievement-card ${achievement.unlocked ? 'unlocked' : 'locked'}" 
             data-rarity="${achievement.rarity}"
             style="--rarity-color: ${rarityColors[achievement.rarity]}">
          <div class="achievement-icon">
            <i data-lucide="${achievement.icon}"></i>
          </div>
          <div class="achievement-info">
            <div class="achievement-name">
              ${achievement.name}
              <span class="rarity-badge ${achievement.rarity}">${rarityLabel}</span>
            </div>
            <div class="achievement-desc">${achievement.description}</div>
            ${achievement.unlocked ? `
              <div class="achievement-date">Unlocked ${new Date(achievement.unlockedAt).toLocaleDateString()}</div>
            ` : '<div class="achievement-locked">Locked</div>'}
          </div>
          <div class="achievement-xp">+${achievement.xpReward} XP</div>
        </div>
      `;
    }
  </script>
</body>
</html>
