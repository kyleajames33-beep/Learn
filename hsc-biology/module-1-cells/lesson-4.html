<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Lesson 4: Cell Membrane Structure - The Gatekeeper. Learn about the phospholipid bilayer, fluid mosaic model, and selective permeability. HSC Biology Module 1.">
  <meta name="theme-color" content="#93e4f9">
  
  <title>Lesson 4: The Gatekeeper (Cell Membrane) | HSC Biology | Science Hub</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="../../assets/css/global.css?v=3">
  <link rel="stylesheet" href="../../assets/css/components.css?v=3">
  <link rel="stylesheet" href="../../assets/css/streak.css?v=1">
  <link rel="icon" type="image/svg+xml" href="../../assets/images/favicon.svg">
  <link rel="manifest" href="../../assets/manifest.json">
  
  <style>
    /* ============================================
       LESSON 4 SPECIFIC COMPONENTS
       5E-CLT Framework Implementation
       ============================================ */
    
    /* The Hook Section */
    .hook-section {
      background: linear-gradient(135deg, var(--critical-light) 0%, var(--bg-elevated) 100%);
      border-left: 4px solid var(--critical);
      border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
      margin: var(--space-6) 0;
      overflow: hidden;
    }
    
    .hook-visual {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-8);
      padding: var(--space-6);
      background: var(--bg-elevated);
      border-bottom: 2px solid var(--border-light);
    }
    
    .cell-visual {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      position: relative;
    }
    
    .cell-shriveled {
      background: #e0f2fe;
      border: 3px solid #7dd3fc;
      animation: pulse 3s infinite;
    }
    
    .cell-burst {
      background: #fee2e2;
      border: 3px solid #fca5a5;
    }
    
    .cell-burst::after {
      content: "üí•";
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 24px;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    /* Accordion Component */
    .accordion-container {
      margin: var(--space-6) 0;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: var(--bg-surface);
    }
    
    .accordion-item {
      border-bottom: 1px solid var(--border-light);
    }
    
    .accordion-item:last-child {
      border-bottom: none;
    }
    
    .accordion-header {
      width: 100%;
      padding: var(--space-4) var(--space-5);
      background: var(--bg-sidebar);
      border: none;
      text-align: left;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      font-family: var(--font-primary);
      font-size: var(--text-base);
      font-weight: 600;
      color: var(--text-primary);
      transition: background var(--transition-fast);
    }
    
    .accordion-header:hover {
      background: var(--bg-elevated);
    }
    
    .accordion-header[aria-expanded="true"] {
      background: var(--primary-light);
    }
    
    .accordion-header[aria-expanded="true"] .accordion-icon {
      transform: rotate(180deg);
    }
    
    .accordion-icon {
      transition: transform var(--transition-normal);
      color: var(--text-muted);
    }
    
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height var(--transition-normal);
      background: var(--bg-surface);
    }
    
    .accordion-content.active {
      max-height: 600px;
    }
    
    .accordion-body {
      padding: var(--space-5);
      color: var(--text-secondary);
      line-height: 1.8;
    }
    
    /* Retrieval Arena */
    .retrieval-arena {
      background: linear-gradient(135deg, var(--bg-surface) 0%, var(--primary-light) 100%);
      border: 2px solid var(--primary);
      border-radius: var(--radius-xl);
      padding: var(--space-6);
      margin: var(--space-8) 0;
    }
    
    .arena-header {
      text-align: center;
      margin-bottom: var(--space-6);
    }
    
    .arena-title {
      font-size: var(--text-2xl);
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
    }
    
    .retrieval-activity {
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--space-5);
      margin-bottom: var(--space-5);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border-light);
    }
    
    .retrieval-label {
      display: inline-block;
      background: var(--primary);
      color: var(--text-primary);
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--space-3);
    }
    
    /* Cloze Input */
    .cloze-input {
      display: inline-block;
      width: 140px;
      border: none;
      border-bottom: 2px solid var(--border-medium);
      background: var(--bg-elevated);
      padding: var(--space-1) var(--space-2);
      font-family: var(--font-primary);
      text-align: center;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 var(--space-1);
      transition: all var(--transition-fast);
      font-size: var(--text-base);
    }
    
    .cloze-input:focus {
      outline: none;
      border-bottom-color: var(--primary-dark);
      background: var(--primary-light);
    }
    
    .cloze-input.correct {
      background: var(--success);
      border-bottom-color: var(--success-dark);
      color: #065f46;
    }
    
    .cloze-input.incorrect {
      background: var(--danger);
      border-bottom-color: var(--danger-dark);
      color: #991b1b;
    }
    
    /* Checkpoint Micro-Quiz */
    .checkpoint {
      background: var(--bg-elevated);
      border-left: 4px solid var(--accent);
      padding: var(--space-4) var(--space-5);
      margin: var(--space-4) 0;
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }
    
    .checkpoint-header {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-3);
    }
    
    .mc-option {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) var(--space-4);
      background: var(--bg-main);
      border: 2px solid transparent;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      margin-bottom: var(--space-2);
    }
    
    .mc-option:hover {
      background: var(--bg-elevated);
      border-color: var(--border-light);
    }
    
    .mc-option input[type="radio"] {
      margin: 0;
    }
    
    /* Interleaving Bridge */
    .bridge-section {
      background: linear-gradient(90deg, var(--secondary-light), transparent);
      border-left: 4px solid var(--secondary-dark);
      padding: var(--space-4) var(--space-5);
      margin: var(--space-6) 0;
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }
    
    .bridge-section em {
      color: var(--text-muted);
      font-size: var(--text-sm);
    }
    
    /* Copy Into Books */
    .copy-books-section {
      background: white;
      border: 2px dashed var(--secondary);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      margin: var(--space-8) 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--text-sm);
      line-height: 1.8;
    }
    
    .copy-header {
      font-family: var(--font-primary);
      font-size: var(--text-lg);
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }
    
    .copy-content {
      white-space: pre-wrap;
      color: var(--text-secondary);
    }
    
    /* Progress Indicator */
    .lesson-progress-bar {
      position: sticky;
      top: 70px;
      z-index: 90;
      background: var(--bg-surface);
      border-bottom: 1px solid var(--border-light);
      padding: var(--space-2) var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-3);
      font-size: var(--text-sm);
      color: var(--text-muted);
    }
    
    .progress-track {
      flex: 1;
      height: 4px;
      background: var(--bg-elevated);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .progress-fill-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.3s ease;
    }
    
    /* Phospholipid Diagram */
    .phospholipid-diagram {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-4);
    }
    
    .phospholipid-head {
      width: 60px;
      height: 60px;
      background: #fca5a5;
      border: 3px solid #ef4444;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #991b1b;
    }
    
    .phospholipid-tails {
      display: flex;
      gap: 8px;
    }
    
    .phospholipid-tail {
      width: 6px;
      height: 50px;
      background: #93c5fd;
      border-radius: 3px;
    }
    
    .bilayer-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: var(--space-6);
      background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 40%, #bae6fd 60%, #e0f2fe 100%);
      border-radius: var(--radius-lg);
    }
    
    .bilayer-row {
      display: flex;
      gap: 30px;
    }
  </style>
</head>
<body>
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to content</a>

  <!-- Top Navigation -->
  <header class="top-nav">
    <div class="nav-container">
      <button class="mobile-menu-toggle" aria-label="Toggle menu">
        <i data-lucide="menu"></i>
      </button>
      
      <a href="../../index.html" class="nav-logo">
        <i data-lucide="atom"></i>
        <span>Science Hub</span>
      </a>
      
      <div class="nav-search">
        <input type="search" placeholder="Search lessons..." aria-label="Search lessons">
      </div>
      
      <div style="width: 40px;"></div>
    </div>
    
    <div class="breadcrumb-container">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="../../index.html">Home</a>
        <i data-lucide="chevron-right"></i>
        <a href="../index.html">HSC Biology</a>
        <i data-lucide="chevron-right"></i>
        <span>Lesson 4</span>
      </nav>
    </div>
  </header>

  <!-- Progress Bar -->
  <div class="lesson-progress-bar">
    <i data-lucide="book-open" style="width: 16px; height: 16px;"></i>
    <span>Progress</span>
    <div class="progress-track">
      <div class="progress-fill-bar" id="progressFill"></div>
    </div>
    <span id="progressText">0%</span>
  </div>

  <div class="lesson-layout">
    <!-- Sidebar -->
    <aside class="lesson-sidebar" id="lesson-sidebar">
      <div class="sidebar-header">
        <h3>Module 1: Cells</h3>
        <span>HSC Biology</span>
      </div>
      
      <div class="sidebar-progress">
        <div class="progress-bar-wrapper">
          <div class="progress-bar-fill" style="width: 0%"></div>
        </div>
        <span class="progress-text">0/30 lessons</span>
      </div>
      
      <nav class="lesson-list">
        <a href="lesson-1.html" class="lesson-item" data-lesson="1">
          <span class="lesson-number">1</span>
          <span class="lesson-title-text">Introduction to Cells</span>
          <i data-lucide="check" class="lesson-check"></i>
        </a>
        <a href="lesson-2.html" class="lesson-item" data-lesson="2">
          <span class="lesson-number">2</span>
          <span class="lesson-title-text">Prokaryotic Cells</span>
          <i data-lucide="check" class="lesson-check"></i>
        </a>
        <a href="lesson-3.html" class="lesson-item" data-lesson="3">
          <span class="lesson-number">3</span>
          <span class="lesson-title-text">Eukaryotic Cell Structure</span>
          <i data-lucide="check" class="lesson-check"></i>
        </a>
        <a href="lesson-4.html" class="lesson-item active" data-lesson="4" aria-current="page">
          <span class="lesson-number">4</span>
          <span class="lesson-title-text">The Gatekeeper</span>
          <i data-lucide="check" class="lesson-check"></i>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main id="main-content">
      
      <!-- Hero Section -->
      <header class="lesson-hero">
        <div class="lesson-hero-badges">
          <span class="badge badge-critical">HSC Biology</span>
          <span class="badge badge-secondary">Module 1</span>
          <span class="badge">Lesson 4</span>
        </div>
        
        <h1 class="lesson-hero-title">The Gatekeeper</h1>
        <p class="lesson-hero-description">
          Discover how the cell membrane controls what enters and exits the cell. Explore the fluid mosaic model and understand why hospitals use 0.9% saline in IV bags‚Äînot pure water.
        </p>
        
        <div class="lesson-hero-meta">
          <span class="hero-meta-item">
            <i data-lucide="clock"></i>
            <span>50 minutes</span>
          </span>
          <span class="hero-meta-item">
            <i data-lucide="signal"></i>
            <span>Intermediate</span>
          </span>
          <span class="hero-meta-item">
            <i data-lucide="wifi-off"></i>
            <span>Works Offline</span>
          </span>
        </div>
      </header>

      <!-- Learning Intentions Grid -->
      <div class="grid-3-col" style="margin-bottom: 48px;">
        <div class="card reveal">
          <div class="card-header">
            <div class="icon-wrapper icon-wrapper-secondary">
              <i data-lucide="target"></i>
            </div>
            <h2 class="card-title">Learning Intentions</h2>
          </div>
          <div class="card-content">
            <ul style="padding-left: 20px; color: var(--text-secondary);">
              <li style="margin-bottom: 8px;">Explain the fluid mosaic model of membrane structure</li>
              <li style="margin-bottom: 8px;">Describe the role of phospholipids and proteins</li>
              <li>Connect membrane structure to medical applications</li>
            </ul>
          </div>
        </div>

        <div class="card reveal">
          <div class="card-header">
            <div class="icon-wrapper icon-wrapper-critical">
              <i data-lucide="link"></i>
            </div>
            <h2 class="card-title">HSC Links</h2>
          </div>
          <div class="card-content">
            <ul style="padding-left: 20px; color: var(--text-secondary);">
              <li style="margin-bottom: 8px;"><strong>Inquiry Question:</strong> How do cells coordinate activities?</li>
              <li style="margin-bottom: 8px;">Module 8: Cystic fibrosis (CFTR defects)</li>
              <li>Selective permeability investigations</li>
            </ul>
          </div>
        </div>

        <div class="card reveal">
          <div class="card-header">
            <div class="icon-wrapper">
              <i data-lucide="check-circle"></i>
            </div>
            <h2 class="card-title">Success Criteria</h2>
          </div>
          <div class="card-content">
            <ul style="padding-left: 20px; color: var(--text-secondary);">
              <li style="margin-bottom: 8px;">Label fluid mosaic model components</li>
              <li style="margin-bottom: 8px;">Explain why 0.9% saline is used in IV bags</li>
              <li>Predict membrane behavior in solutions</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 1. THE HOOK (Curiosity Gap + Dual Coding) -->
      <section class="hook-section reveal" data-section="hook">
        <div class="hook-visual">
          <div class="cell-visual cell-shriveled">
            ü•Ä
            <span style="font-size: 12px; margin-top: 4px;">Shriveled</span>
          </div>
          <div style="font-size: 24px; color: var(--text-muted);">VS</div>
          <div class="cell-visual cell-burst">
            üí•
            <span style="font-size: 12px; margin-top: 4px;">Burst</span>
          </div>
        </div>
        
        <div class="card-content" style="padding: var(--space-5);">
          <h2 style="font-size: var(--text-2xl); margin-bottom: var(--space-4); color: var(--text-primary);">
            The Paradox of the Gatekeeper
          </h2>
          
          <p style="line-height: 1.8; font-size: var(--text-lg); margin-bottom: var(--space-4); color: var(--text-secondary);">
            Yesterday we calculated that a red blood cell has <strong>600Œºm¬≤ of surface area</strong>‚Äîmassive for its size. Yet if a nurse accidentally injects <strong>pure water</strong> into your bloodstream, these cells explode within seconds.
          </p>
          
          <p style="line-height: 1.8; margin-bottom: var(--space-4); color: var(--text-secondary);">
            Why does a cell with such sophisticated design fail so catastrophically? And why do hospital IV bags contain <strong>0.9% saline</strong> instead of pure water?
          </p>
          
          <div style="background: var(--bg-elevated); padding: var(--space-4); border-radius: var(--radius-md); border-left: 4px solid var(--critical);">
            <p style="font-weight: 600; color: var(--text-primary);">
              <i data-lucide="help-circle" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: var(--space-2);"></i>
              Inquiry Question: How do cells coordinate activities across their membranes?
            </p>
          </div>
        </div>
      </section>

      <!-- 2. CORE UNIT 1: Phospholipid Bilayer -->
      <section class="content-section reveal" data-section="unit1">
        <h2>
          <i data-lucide="layers"></i>
          Unit 1: The Phospholipid Bilayer
        </h2>
        
        <!-- Visual-First (Dual Coding) -->
        <div class="bilayer-container" style="margin: var(--space-5) 0;">
          <!-- Top row (outer heads) -->
          <div class="bilayer-row">
            <div class="phospholipid-diagram">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
            <div class="phospholipid-diagram">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
            <div class="phospholipid-diagram">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
          </div>
          
          <!-- Water/Oil barrier -->
          <div style="height: 30px; background: linear-gradient(90deg, transparent, rgba(147,228,249,0.3), transparent); border-radius: 15px; display: flex; align-items: center; justify-content: center; color: var(--text-muted); font-size: var(--text-sm);">
            Hydrophobic Zone (Water-fearing)
          </div>
          
          <!-- Bottom row (inner heads) -->
          <div class="bilayer-row">
            <div class="phospholipid-diagram" style="flex-direction: column-reverse;">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
            <div class="phospholipid-diagram" style="flex-direction: column-reverse;">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
            <div class="phospholipid-diagram" style="flex-direction: column-reverse;">
              <div class="phospholipid-head">‚óè</div>
              <div class="phospholipid-tails">
                <div class="phospholipid-tail"></div>
                <div class="phospholipid-tail"></div>
              </div>
            </div>
          </div>
        </div>
        
        <p style="text-align: center; color: var(--text-muted); font-size: var(--text-sm); margin-bottom: var(--space-5);">
          <i data-lucide="info" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle;"></i>
          The phospholipid bilayer: Red spheres = hydrophilic heads, Blue lines = hydrophobic tails
        </p>

        <!-- Verbal-Visual Integration -->
        <div class="card" style="margin-bottom: var(--space-5);">
          <div class="card-header">
            <div class="icon-wrapper" style="background: #fee2e2;">
              <span style="color: #ef4444; font-weight: 700;">‚óè</span>
            </div>
            <h3 class="card-title">The Dual Nature of the Bilayer</h3>
          </div>
          <div class="card-content">
            <p style="line-height: 1.8; margin-bottom: var(--space-4); color: var(--text-secondary);">
              This diagram shows the <strong>phospholipid bilayer</strong>. Notice the <span style="color: #ef4444; font-weight: 600;">red heads</span> face outward toward water‚Äîthese are <strong>hydrophilic</strong> (water-loving). The <span style="color: #3b82f6; font-weight: 600;">blue tails</span> hide in the middle, <strong>hydrophobic</strong> (water-fearing).
            </p>
            <p style="line-height: 1.8; color: var(--text-secondary);">
              This creates an automatic barrier because water cannot cross the oily center without help. This is <strong>selective permeability</strong>‚Äîthe foundation of membrane function.
            </p>
          </div>
        </div>

        <!-- Checkpoint Micro-Quiz (Testing Effect) -->
        <div class="checkpoint">
          <div class="checkpoint-header">
            <i data-lucide="brain" style="color: var(--accent);"></i>
            <span>Retrieval Checkpoint (2 min)</span>
          </div>
          <p style="margin-bottom: var(--space-3); color: var(--text-secondary);">
            Why do phospholipids naturally form a bilayer in water?
          </p>
          <div id="checkpoint-options">
            <label class="mc-option" onclick="checkCheckpoint('A', false)">
              <input type="radio" name="checkpoint1" value="A">
              <span style="font-weight: 600; color: var(--text-muted);">A</span>
              <span>To maximize surface area</span>
            </label>
            <label class="mc-option" onclick="checkCheckpoint('B', true)">
              <input type="radio" name="checkpoint1" value="B">
              <span style="font-weight: 600; color: var(--text-muted);">B</span>
              <span>Hydrophilic heads face water, hydrophobic tails hide inside</span>
            </label>
            <label class="mc-option" onclick="checkCheckpoint('C', false)">
              <input type="radio" name="checkpoint1" value="C">
              <span style="font-weight: 600; color: var(--text-muted);">C</span>
              <span>To allow proteins to attach more easily</span>
            </label>
          </div>
          <div id="checkpoint-feedback" style="margin-top: var(--space-3); display: none; padding: var(--space-3); border-radius: var(--radius-md);"></div>
        </div>
      </section>

      <!-- 3. INTERLEAVING BRIDGE -->
      <section class="bridge-section reveal" data-section="bridge">
        <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3);">
          <i data-lucide="git-branch" style="color: var(--secondary-dark);"></i>
          <strong style="color: var(--text-primary);">Interleaving Bridge</strong>
        </div>
        <p style="margin: 0; line-height: 1.7;">
          <strong>Connect to Lesson 1:</strong> If a 10Œºm cell has 600Œºm¬≤ of surface area, and each phospholipid head occupies 0.5nm¬≤, approximately how many phospholipid molecules form this cell's membrane?
        </p>
        <p style="margin-top: var(--space-3);">
          <em>(This is why cells are small‚Äîmembrane synthesis is metabolically expensive!)</em>
        </p>
      </section>

      <!-- 4. CORE UNIT 2: Transport Proteins -->
      <section class="content-section reveal" data-section="unit2">
        <h2>
          <i data-lucide="arrow-left-right"></i>
          Unit 2: Transport Proteins
        </h2>

        <div class="card" style="margin-bottom: var(--space-4);">
          <div class="card-header">
            <div class="icon-wrapper icon-wrapper-secondary">
              <i data-lucide="door-open"></i>
            </div>
            <h3 class="card-title">Channels and Carriers</h3>
          </div>
          <div class="card-content">
            <p style="line-height: 1.8; margin-bottom: var(--space-4); color: var(--text-secondary);">
              The bilayer blocks everything, but cells need to import glucose, export waste, and maintain ion gradients. This requires <strong>transport proteins</strong>‚Äîspecialized structures that create gates through the membrane.
            </p>
            
            <div class="grid-2-col" style="margin: var(--space-4) 0;">
              <div class="card" style="background: var(--bg-elevated);">
                <div class="card-header" style="background: transparent;">
                  <h4 style="font-size: var(--text-base); margin: 0;">Channel Proteins</h4>
                </div>
                <div class="card-content" style="padding-top: 0;">
                  <ul style="padding-left: var(--space-4); color: var(--text-secondary); font-size: var(--text-sm);">
                    <li style="margin-bottom: 8px;">Form pores through membrane</li>
                    <li style="margin-bottom: 8px;">Passive transport (no ATP)</li>
                    <li style="margin-bottom: 8px;">Highly specific (e.g., aquaporins)</li>
                    <li>Example: Ion channels</li>
                  </ul>
                </div>
              </div>
              
              <div class="card" style="background: var(--bg-elevated);">
                <div class="card-header" style="background: transparent;">
                  <h4 style="font-size: var(--text-base); margin: 0;">Carrier Proteins</h4>
                </div>
                <div class="card-content" style="padding-top: 0;">
                  <ul style="padding-left: var(--space-4); color: var(--text-secondary); font-size: var(--text-sm);">
                    <li style="margin-bottom: 8px;">Bind specific molecules</li>
                    <li style="margin-bottom: 8px;">Change shape to transport</li>
                    <li style="margin-bottom: 8px;">Can be active or passive</li>
                    <li>Example: Glucose transporters</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Clinical Connection Activity -->
        <div class="activity-card activity-card--purple reveal">
          <div class="activity-card-header">
            <i data-lucide="stethoscope"></i>
            <h3>Clinical Connection: The IV Bag Mystery</h3>
          </div>
          <div class="activity-card-body">
            <p style="margin-bottom: var(--space-4);">
              <strong>Scenario:</strong> A patient receives an IV of pure distilled water instead of 0.9% saline. Within minutes, their red blood cells begin to rupture (hemolysis).
            </p>
            <p style="margin-bottom: var(--space-4);">
              Using your knowledge of:
            </p>
            <ul style="margin-bottom: var(--space-4);">
              <li>Osmosis (water movement across membranes)</li>
              <li>Selective permeability</li>
              <li>Surface area to volume ratios</li>
            </ul>
            <p style="margin-bottom: var(--space-4); font-weight: 600;">
              Explain why pure water causes cells to burst, and why 0.9% saline prevents this.
            </p>
            <textarea class="modern-input" placeholder="Type your explanation here... (Hint: Think about water potential and the phospholipid bilayer's response to solute concentration)" style="min-height: 120px;"></textarea>
          </div>
        </div>
      </section>

      <!-- 5. DEEP DIVE (Accordion) -->
      <section class="content-section reveal" data-section="deepdive">
        <h2>
          <i data-lucide="book-open"></i>
          Deep Dive: Optional Extensions
        </h2>
        <p style="margin-bottom: var(--space-4);">Expand sections based on your interest:</p>
        
        <div class="accordion-container">
          <!-- Accordion Item 1 -->
          <div class="accordion-item">
            <button class="accordion-header" onclick="toggleAccordion(this)" aria-expanded="false">
              <span style="display: flex; align-items: center; gap: var(--space-2);">
                <i data-lucide="microscope" style="width: 18px; height: 18px;"></i>
                HSC Exam Connection: Cystic Fibrosis (Module 8)
              </span>
              <i data-lucide="chevron-down" class="accordion-icon"></i>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <p>The <strong>CFTR protein</strong> is a chloride channel in the membrane. When mutated in cystic fibrosis, this channel fails to open, disrupting the osmotic balance in lung mucus. This connects membrane transport to genetic disease‚Äîa classic HSC synoptic question linking Modules 1, 5, and 8.</p>
                <p style="margin-top: var(--space-3);"><strong>Exam Tip:</strong> Look for questions asking how membrane protein defects lead to cellular dysfunction.</p>
              </div>
            </div>
          </div>

          <!-- Accordion Item 2 -->
          <div class="accordion-item">
            <button class="accordion-header" onclick="toggleAccordion(this)" aria-expanded="false">
              <span style="display: flex; align-items: center; gap: var(--space-2);">
                <i data-lucide="briefcase" style="width: 18px; height: 18px;"></i>
                Career Connection: Pharmaceutical Design
              </span>
              <i data-lucide="chevron-down" class="accordion-icon"></i>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <p>Drug designers target membrane receptors. <strong>Beta-blockers</strong>, for example, bind to Œ≤-adrenergic receptors on cell membranes, blocking adrenaline. Understanding the fluid mosaic model helps chemists design molecules that can embed or attach to specific membrane components.</p>
              </div>
            </div>
          </div>

          <!-- Accordion Item 3 -->
          <div class="accordion-item">
            <button class="accordion-header" onclick="toggleAccordion(this)" aria-expanded="false">
              <span style="display: flex; align-items: center; gap: var(--space-2);">
                <i data-lucide="zap" style="width: 18px; height: 18px;"></i>
                Challenge Question [4 marks]
              </span>
              <i data-lucide="chevron-down" class="accordion-icon"></i>
            </button>
            <div class="accordion-content">
              <div class="accordion-body">
                <p><strong>Question:</strong> Explain why increasing temperature initially increases the rate of diffusion across membranes, but excessive heat causes cell death. In your answer, refer to the fluid mosaic model and membrane protein structure.</p>
                <p style="margin-top: var(--space-3); font-size: var(--text-sm); color: var(--text-muted);">
                  <em>Marking criteria: Temperature and kinetic energy (1), fluidity increase (1), protein denaturation at high heat (1), loss of selective permeability (1).</em>
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 6. THE RETRIEVAL ARENA -->
      <section class="retrieval-arena reveal" data-section="retrieval">
        <div class="arena-header">
          <h2 class="arena-title">
            <i data-lucide="shield" style="color: var(--primary-dark);"></i>
            The Retrieval Arena
          </h2>
          <p style="color: var(--text-secondary); margin-top: var(--space-2);">Consolidate your learning through active recall</p>
        </div>

        <!-- Activity 1: Cued Recall -->
        <div class="retrieval-activity">
          <span class="retrieval-label">Cued Recall (3 min)</span>
          <h3 style="font-size: var(--text-lg); margin-bottom: var(--space-4); color: var(--text-primary);">Complete the Concept</h3>
          <p style="line-height: 2; color: var(--text-secondary);">
            The cell membrane consists of a 
            <input type="text" class="cloze-input" data-answer="phospholipid" placeholder="________"> 
            bilayer. The heads are 
            <input type="text" class="cloze-input" data-answer="hydrophilic" placeholder="________"> 
            (water-loving) while the tails are 
            <input type="text" class="cloze-input" data-answer="hydrophobic" placeholder="________"> 
            (water-fearing). This arrangement creates a barrier that is selectively 
            <input type="text" class="cloze-input" data-answer="permeable" placeholder="________">.
          </p>
          <button class="btn btn-primary" onclick="checkCloze()" style="margin-top: var(--space-4);">
            <i data-lucide="check-circle"></i>
            Check Answers
          </button>
        </div>

        <!-- Activity 2: Recognition -->
        <div class="retrieval-activity">
          <span class="retrieval-label" style="background: var(--secondary);">Recognition (4 min)</span>
          <h3 style="font-size: var(--text-lg); margin-bottom: var(--space-4); color: var(--text-primary);">Label the Components</h3>
          <!-- Fluid Mosaic Model Diagram with Labels -->
          <div style="background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 40%, #bae6fd 60%, #e0f2fe 100%); padding: 60px var(--space-6) var(--space-6); border-radius: var(--radius-md); margin-bottom: var(--space-4);">
            
            <!-- The Membrane Diagram -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; position: relative;">
              
              <!-- Top layer with Label 1 -->
              <div style="display: flex; align-items: flex-start; gap: 40px;">
                <!-- Phospholipid 1 with Label -->
                <div style="display: flex; flex-direction: column; align-items: center; position: relative;">
                  <!-- Label 1 above -->
                  <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                    <span style="background: var(--primary); color: white; width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 13px;">1</span>
                    <span style="background: white; padding: 3px 6px; border-radius: 4px; font-size: 11px; box-shadow: 0 1px 3px rgba(0,0,0,0.15);">?</span>
                  </div>
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                  <div style="display: flex; gap: 3px; margin-top: 3px;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                  </div>
                </div>
                
                <!-- Phospholipid 2 -->
                <div style="display: flex; flex-direction: column; align-items: center; margin-top: 34px;">
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                  <div style="display: flex; gap: 3px; margin-top: 3px;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                  </div>
                </div>
                
                <!-- Transport Protein with Label 2 -->
                <div style="display: flex; flex-direction: column; align-items: center; position: relative; margin-top: 10px;">
                  <!-- Label 2 to the right -->
                  <div style="position: absolute; right: -70px; top: 20px; display: flex; align-items: center; gap: 6px;">
                    <span style="background: var(--primary); color: white; width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 13px;">2</span>
                    <span style="background: white; padding: 3px 6px; border-radius: 4px; font-size: 11px; box-shadow: 0 1px 3px rgba(0,0,0,0.15);">?</span>
                  </div>
                  <div style="width: 55px; height: 90px; background: linear-gradient(180deg, #a78bfa 0%, #8b5cf6 100%); border-radius: 28px; display: flex; align-items: center; justify-content: center; border: 3px solid #7c3aed;">
                    <div style="width: 18px; height: 50px; background: #e0f2fe; border-radius: 9px;"></div>
                  </div>
                </div>
                
                <!-- Phospholipid 3 with Label 3 on tails -->
                <div style="display: flex; flex-direction: column; align-items: center; position: relative; margin-top: 34px;">
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                  <div style="display: flex; gap: 3px; margin-top: 3px; position: relative;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <!-- Label 3 on the tails -->
                    <div style="position: absolute; left: 15px; top: 5px; display: flex; align-items: center; gap: 6px;">
                      <span style="background: var(--primary); color: white; width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 13px;">3</span>
                      <span style="background: white; padding: 3px 6px; border-radius: 4px; font-size: 11px; box-shadow: 0 1px 3px rgba(0,0,0,0.15);">?</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Hydrophobic zone label -->
              <div style="font-size: 12px; color: var(--text-muted); background: rgba(255,255,255,0.9); padding: 6px 16px; border-radius: 12px; margin: 10px 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                Hydrophobic Interior
              </div>
              
              <!-- Bottom layer -->
              <div style="display: flex; align-items: flex-end; gap: 40px;">
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <div style="display: flex; gap: 3px; margin-bottom: 3px;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                  </div>
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <div style="display: flex; gap: 3px; margin-bottom: 3px;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                  </div>
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                </div>
                <div style="width: 55px;"></div> <!-- Spacer for protein -->
                <div style="display: flex; flex-direction: column; align-items: center;">
                  <div style="display: flex; gap: 3px; margin-bottom: 3px;">
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                    <div style="width: 4px; height: 35px; background: #93c5fd; border-radius: 2px;"></div>
                  </div>
                  <div style="width: 45px; height: 45px; background: #fca5a5; border: 3px solid #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #991b1b; font-size: 14px;">‚óè</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Answer Inputs -->
          <div style="display: flex; flex-wrap: wrap; gap: var(--space-3); justify-content: center;">
            <div style="display: flex; align-items: center; gap: var(--space-2);">
              <span style="background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">1</span>
              <input type="text" class="modern-input" style="width: 200px;" placeholder="Component 1..." data-answer="phospholipid head">
            </div>
            <div style="display: flex; align-items: center; gap: var(--space-2);">
              <span style="background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">2</span>
              <input type="text" class="modern-input" style="width: 200px;" placeholder="Component 2..." data-answer="channel protein">
            </div>
            <div style="display: flex; align-items: center; gap: var(--space-2);">
              <span style="background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700;">3</span>
              <input type="text" class="modern-input" style="width: 200px;" placeholder="Component 3..." data-answer="phospholipid tail">
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="checkDiagramLabels()" style="margin-top: var(--space-4);">
            <i data-lucide="check-circle"></i>
            Check Labels
          </button>
        </div>

        <!-- Activity 3: Elaboration -->
        <div class="retrieval-activity">
          <span class="retrieval-label" style="background: var(--critical);">Elaboration (3 min)</span>
          <h3 style="font-size: var(--text-lg); margin-bottom: var(--space-4); color: var(--text-primary);">Explain the Mechanism</h3>
          <p style="color: var(--text-secondary); margin-bottom: var(--space-4);">
            Why does a phospholipid bilayer naturally form a sphere around a cell rather than remaining as a flat sheet? Explain in terms of surface area, stability, and the hydrophobic effect.
          </p>
          <textarea class="modern-input" placeholder="Your explanation... (Research shows writing explanations improves retention by 50% compared to re-reading)" style="min-height: 120px;"></textarea>
        </div>
      </section>

      <!-- 7. META-COGNITIVE CLOSE -->
      <section class="content-section reveal" data-section="close">
        <div class="copy-books-section">
          <div class="copy-header">
            <i data-lucide="book-copy"></i>
            Copy Into Your Books
          </div>
          <div class="copy-content"><strong>Lesson 4: The Cell Membrane (The Gatekeeper)</strong>

<strong>Structure:</strong> Fluid mosaic model
‚Ä¢ Phospholipid bilayer: Hydrophilic heads (out), hydrophobic tails (in)
‚Ä¢ Proteins embedded: Channels (pores) and carriers (shape-change)
‚Ä¢ Cholesterol: Maintains fluidity
‚Ä¢ Glycoproteins: Cell recognition ("self" markers)

<strong>Function:</strong> Selective permeability
‚Ä¢ Barrier: Blocks hydrophilic substances
‚Ä¢ Transport proteins: Allow specific molecules through
‚Ä¢ Passive transport: No ATP, down concentration gradient
‚Ä¢ Active transport: Uses ATP, against gradient

<strong>Medical Application:</strong>
‚Ä¢ 0.9% saline = isotonic (same solute concentration as blood)
‚Ä¢ Pure water = hypotonic ‚Üí water rushes in ‚Üí lysis (bursting)
‚Ä¢ This is why IV bags must be saline, not water

<strong>HSC Connection:</strong>
‚Ä¢ Cystic fibrosis: CFTR channel protein defect (Module 8)
‚Ä¢ Working Scientifically: Selective permeability experiments</div>
        </div>

        <!-- Self-Check -->
        <div class="card" style="background: var(--success); border-color: #10b981; margin-top: var(--space-6);">
          <div class="card-content" style="text-align: center;">
            <h3 style="color: #065f46; margin-bottom: var(--space-3);">Can you answer the Inquiry Question?</h3>
            <p style="color: #065f46; margin-bottom: var(--space-4);">
              "How do cells coordinate activities across their membranes?"
            </p>
            <p style="color: #065f46; font-size: var(--text-sm);">
              <em>If yes, proceed to mark complete. If no, review the Retrieval Arena.</em>
            </p>
          </div>
        </div>

        <!-- Mark Complete -->
        <div style="text-align: center; margin: 48px 0;">
          <button class="mark-complete-btn" data-lesson="4">
            <i data-lucide="circle"></i>
            <span>Mark as Complete</span>
          </button>
        </div>
      </section>

      <!-- Navigation -->
      <nav class="lesson-navigation reveal">
        <a href="lesson-3.html" class="lesson-nav-btn">
          <i data-lucide="chevron-left"></i>
          <div class="nav-btn-content">
            <span class="nav-btn-label">Previous</span>
            <span class="nav-btn-title">Eukaryotic Cell Structure</span>
          </div>
        </a>

        <a href="./index.html" class="lesson-nav-home">
          <i data-lucide="grid-3x3"></i>
          <span>All Lessons</span>
        </a>

        <a href="lesson-5.html" class="lesson-nav-btn" style="opacity: 0.5; pointer-events: none;" id="nextLessonBtn">
          <div class="nav-btn-content" style="text-align: right;">
            <span class="nav-btn-label">Next</span>
            <span class="nav-btn-title">Passive Transport</span>
          </div>
          <i data-lucide="chevron-right"></i>
        </a>
      </nav>

    </main>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <i data-lucide="atom"></i>
        <span>Science Hub</span>
      </div>
      <p class="footer-tagline">Making science education accessible, engaging, and effective.</p>
      <div class="footer-links">
        <a href="../../index.html">Home</a>
        <a href="../index.html">HSC Biology</a>
        <a href="../../year-7/index.html">Year 7</a>
        <a href="../../year-8/index.html">Year 8</a>
      </div>
      <p class="footer-copyright">¬© 2026 Science Learning Hub. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="../../assets/js/main.js"></script>
  <script src="../../assets/js/streak.js"></script>
  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Lesson-specific initialization
    document.addEventListener('DOMContentLoaded', () => {
      const yearLevel = 'hsc-biology';
      const moduleId = 'module-1-cells';
      const lessonId = '4';
      const totalLessons = 4;

      // Initialize progress tracking
      updateSidebarProgress(yearLevel, moduleId, totalLessons);
      setupMarkComplete(yearLevel, moduleId, lessonId);
      
      // Save last visited
      StorageManager.saveLastVisited(yearLevel, moduleId, lessonId);

      // Progress bar scroll tracking
      updateScrollProgress();
      window.addEventListener('scroll', updateScrollProgress);
    });

    // Scroll progress update
    function updateScrollProgress() {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const progress = Math.round((scrollTop / docHeight) * 100);
      
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('progressText').textContent = progress + '%';
    }

    // Accordion toggle
    function toggleAccordion(button) {
      const content = button.nextElementSibling;
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      
      button.setAttribute('aria-expanded', !isExpanded);
      content.classList.toggle('active');
      
      // Close others
      document.querySelectorAll('.accordion-header').forEach(other => {
        if (other !== button && other.getAttribute('aria-expanded') === 'true') {
          other.setAttribute('aria-expanded', 'false');
          other.nextElementSibling.classList.remove('active');
        }
      });
      
      // Reinitialize icons
      lucide.createIcons();
    }

    // Checkpoint quiz
    function checkCheckpoint(option, isCorrect) {
      const feedback = document.getElementById('checkpoint-feedback');
      feedback.style.display = 'block';
      
      if (isCorrect) {
        feedback.innerHTML = '<span style="color: #059669;">‚úì Correct! Hydrophilic heads face the aqueous environment while hydrophobic tails shield themselves inside.</span>';
        feedback.style.background = '#d1fae5';
      } else {
        feedback.innerHTML = '<span style="color: #dc2626;">‚úó Not quite. Think about what happens when you mix oil and water‚Äîwhich part would face outward?</span>';
        feedback.style.background = '#fee2e2';
      }
      
      // Disable all options
      document.querySelectorAll('#checkpoint-options .mc-option').forEach(opt => {
        opt.style.pointerEvents = 'none';
      });
    }

    // Cloze activity check
    function checkCloze() {
      const inputs = document.querySelectorAll('.cloze-input');
      let correct = 0;
      
      inputs.forEach(input => {
        const answer = input.dataset.answer.toLowerCase();
        const userAnswer = input.value.toLowerCase().trim();
        
        if (userAnswer === answer) {
          input.classList.add('correct');
          input.classList.remove('incorrect');
          correct++;
        } else {
          input.classList.add('incorrect');
          input.classList.remove('correct');
        }
      });
      
      // Show toast notification
      showToast(`Score: ${correct}/${inputs.length} correct`);
    }

    // Check diagram labeling
    function checkDiagramLabels() {
      const inputs = document.querySelectorAll('[data-answer="phospholipid head"], [data-answer="channel protein"], [data-answer="phospholipid tail"]');
      let correct = 0;
      
      inputs.forEach(input => {
        const answer = input.dataset.answer.toLowerCase();
        const userAnswer = input.value.toLowerCase().trim();
        
        // Check for partial matches
        const isCorrect = 
          (answer.includes('head') && userAnswer.includes('head')) ||
          (answer.includes('protein') && (userAnswer.includes('protein') || userAnswer.includes('channel'))) ||
          (answer.includes('tail') && userAnswer.includes('tail'));
        
        if (isCorrect) {
          input.style.borderColor = 'var(--success-dark)';
          input.style.background = 'rgba(74, 222, 128, 0.1)';
          correct++;
        } else {
          input.style.borderColor = 'var(--danger-dark)';
          input.style.background = 'rgba(248, 113, 113, 0.1)';
        }
      });
      
      showToast(`Diagram: ${correct}/${inputs.length} correct`);
    }

    // Toast notification function (if not in main.js)
    function showToast(message) {
      const existing = document.querySelector('.toast-notification');
      if (existing) existing.remove();

      const toast = document.createElement('div');
      toast.className = 'toast-notification';
      toast.textContent = message;
      toast.style.cssText = `
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--text-primary);
        color: white;
        padding: 12px 24px;
        border-radius: 9999px;
        font-weight: 600;
        z-index: 1000;
        animation: fadeIn 0.3s ease;
      `;

      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s ease';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
  </script>
</body>
</html>
